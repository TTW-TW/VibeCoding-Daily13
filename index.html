<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¦™éº—æ­²æ•¸è¨ˆç®—æ©Ÿ</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <link rel="icon" type="image/png" href="./icon.png">
    <link rel="apple-touch-icon" href="./icon.png">
    <link rel="apple-touch-icon" sizes="180x180" href="./icon.png">
    <style>
        body {
            margin: 0;
            font-family: "Noto Sans TC", sans-serif;
            }

        /* æ›¿æ›åŸæœ¬çš„ .wrapper æ¨£å¼ */
        .wrapper {
        /* ä¿ç•™æ•´é«”ç½®ä¸­è¡Œç‚º */
        display: flex;
        justify-content: center;
        align-items: center;

        /* è®“æ©˜è‰²å€å¡Šåœ¨ä¸Šä¸‹ä¿æœ‰ç©ºé–“ä¸¦å·¦å³ä¿ç•™å›ºå®šç™½é‚Š */
        margin: 40px 300px;         /* ä¸Šä¸‹ 40pxã€å·¦å³ 80px çš„ç™½é‚Šï¼ˆå¯æ”¹ï¼‰ */

        /* è‹¥è¦–çª—å¤ªé«˜ï¼Œå¯è®“å…§å®¹å‚ç›´ç½®ä¸­ */
        /*min-height: 100vh;*/

        /* æ©˜è‰²èƒŒæ™¯ï¼ˆåŸæœ¬æ˜¯ body çš„æ©˜è‰²ç§»åˆ°é€™è£¡ï¼‰*/
        background: #f8a832;

        /* å…§éƒ¨é–“è·ï¼Œè®“å…§å±¤ card ä¿æœ‰ç™½è‰²é–“è· */
        padding: 24px;

        /* è‹¥éœ€è¦åœ“è§’èˆ‡é™°å½±ï¼ˆé¸ç”¨ï¼‰ */
        border-radius: 8px;
        box-shadow: 0 4px 18px rgba(0,0,0,0.08);
        }


        .card {
        width: 420px;
        background: #fff;
        padding: 35px;
        border-radius: 20px;
        box-shadow: 0 5px 20px rgba(0,0,0,0.12);
        text-align: center;
        }

        .title {
        color: #a44b18;
        font-size: 28px;
        margin-bottom: 20px;
        }

        /* å°ç‹—åœ–ç‰‡æ‰æ©¢åœ“å½¢ */
        .dog-img-box {
        width: 180px;
        height: 130px;
        margin: 0 auto 20px;
        overflow: hidden;
        border-radius: 50% / 35%;
        box-shadow: 0 2px 10px rgba(0,0,0,0.18);
        }

        .dog-img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        object-position: center top; /* é¿å…å°ç‹—è¢«åˆ‡åˆ° */
        }

        .label {
        display: block;
        text-align: left;
        margin-bottom: 5px;
        font-size: 16px;
        }

        input {
        width: 100%;
        padding: 12px;
        border-radius: 10px;
        border: 1px solid #bbb;
        margin-bottom: 20px;
        font-size: 16px;
        }

        .calc-btn {
        width: 100%;
        padding: 13px;
        font-size: 18px;
        background: linear-gradient(#ffe56a, #ffc300);
        color: #7a4500;
        border: none;
        border-radius: 12px;
        cursor: pointer;
        font-weight: bold;
        box-shadow: 0 3px 5px rgba(0,0,0,0.18);
        }

        .calc-btn:hover {
        background: linear-gradient(#fff07d, #ffcd22);
        }

        .hint {
        margin-top: 20px;
        padding: 12px;
        font-size: 14px;
        color: #666;
        background: #f2f2f2;
        border-radius: 12px;
        line-height: 1.5;
        }

        .result-box {
        margin-top: 25px;
        padding: 25px;
        background: linear-gradient(#ffe9d6, #ffd8b8);
        border-radius: 20px;
        line-height: 1.8;
        font-size: 18px;
        color: #8a3f00;
        border: 2px solid #f3b883;
        font-weight: 500;
        }

        .result-box {
        display: none;   /* æ–°å¢é€™è¡Œ */
        }


    </style>
</head>
<body>
    <div class="wrapper">

        <div class="card">
        <h1 class="title">å¦™éº—æ­²æ•¸è¨ˆç®—æ©Ÿ</h1>

        <!-- å°ç‹—åœ–ç‰‡ -->
        <div class="dog-img-box">
            <img src="https://plus.unsplash.com/premium_vector-1730866160496-abb4e8e12919?q=80&w=1074&auto=format&fit=crop&ixlib=rb-4.1.0"
                alt="dog" class="dog-img">
        </div>

        <label class="label">å¦™éº—çš„å‡ºç”Ÿæ—¥æœŸ</label>
        <input type="text" id="birthDate" placeholder="è«‹é¸æ“‡æ—¥æœŸ">

        <button id="calcBtn" class="calc-btn">é–‹å§‹è¨ˆç®—</button>

        <p class="hint">
            ğŸ’¡è¼¸å…¥æ—¥æœŸå¾ŒæŒ‰ä¸‹æŒ‰éˆ•ï¼Œå†é‡æ–°æ•´ç†ç¶²é å¾Œï¼Œ<br>ç”Ÿæ—¥æ¬„ä½æœƒè‡ªå‹•å¸¶å›ä¸Šæ¬¡çš„å€¼ã€‚
        </p>

        <div id="result" class="result-box"></div>
        </div>

    </div>

    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script>
        // åˆå§‹åŒ– Flatpickr
        flatpickr("#birthDate", {
        dateFormat: "Y/m/d",
        });

        // å°å‹çŠ¬æ›ç®—è¡¨
        const ageMap = [
        { dog: 0.25, human: 3 },   // 3 å€‹æœˆ
        { dog: 0.5,  human: 7 },   // 6 å€‹æœˆ
        { dog: 1,    human: 15 },
        { dog: 2,    human: 24 },
        { dog: 3,    human: 28 },
        { dog: 4,    human: 32 },
        { dog: 5,    human: 36 },
        { dog: 6,    human: 40 },
        { dog: 7,    human: 44 },
        { dog: 8,    human: 48 },
        { dog: 9,    human: 52 },
        { dog: 10,   human: 56 },
        { dog: 11,   human: 60 },
        { dog: 12,   human: 64 },
        { dog: 13,   human: 68 },
        { dog: 14,   human: 72 },
        { dog: 15,   human: 76 },
        { dog: 16,   human: 80 },
        { dog: 18,   human: 88 },
        ];

        // DOM
        const birthInput = document.getElementById("birthDate");
        const resultBox = document.getElementById("result");

        // 1ï¸âƒ£ è¼‰å…¥ localStorage å¸¶å…¥å‰æ¬¡è¼¸å…¥
        window.addEventListener("DOMContentLoaded", () => {
        const savedDate = localStorage.getItem("dogBirthday");
        if (savedDate) {
            birthInput.value = savedDate;
        }
        });

        // 2ï¸âƒ£ æŒ‰ä¸‹é–‹å§‹è¨ˆç®—
        document.getElementById("calcBtn").addEventListener("click", function () {
        const birthDate = birthInput.value;

        if (!birthDate) {
            resultBox.innerHTML = "è«‹å…ˆé¸æ“‡å‡ºç”Ÿæ—¥æœŸï¼";
            return;
        }

        // å„²å­˜åˆ° localStorage
        localStorage.setItem("dogBirthday", birthDate);

        // è¨ˆç®—ç‹—ç‹—å¹´é½¡
        const now = new Date();
        const birth = new Date(birthDate);

        const ageInMs = now - birth;
        const ageInYears = ageInMs / (1000 * 60 * 60 * 24 * 365.25);
        const dogAge = Math.round(ageInYears * 10) / 10;

        let humanAge = null;

        // å°æ–¼ 1 æ­²è¨ˆç®—
        if (dogAge < 1) {
            if (dogAge <= 0.25) humanAge = 3;
            else if (dogAge <= 0.5) humanAge = 7;
            else humanAge = 15;
        } else {
            // æ‰¾æœ€æ¥è¿‘å°ç…§çš„æ­²æ•¸
            let nearest = ageMap.reduce((prev, curr) =>
            Math.abs(curr.dog - dogAge) < Math.abs(prev.dog - dogAge) ? curr : prev
            );
            humanAge = nearest.human;
        }

        const humanAgeRounded = Math.round(humanAge * 10) / 10;

        resultBox.innerHTML = `
            å¦™éº—ç¾åœ¨å¤§ç´„ <strong>${dogAge}</strong> æ­²ç‹—å¹´é½¡ï¼Œ<br>
            æ›ç®—æˆäººé¡å¹´é½¡å¤§ç´„æ˜¯ <strong>${humanAgeRounded}</strong> æ­²
        `;
        
        resultBox.style.display = "block";   /* æ–°å¢é€™è¡Œ */
        });



    </script>
    
</body>
</html>